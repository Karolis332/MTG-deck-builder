appId: com.mtg-deck-builder.app
productName: MTG Deck Builder
copyright: Copyright Â© 2025 MTG Deck Builder

directories:
  output: dist-electron
  buildResources: build

# Use asar but unpack native modules
asar: true
asarUnpack:
  - "node_modules/better-sqlite3/**"

files:
  - "electron-dist/**/*"
  - ".next/**/*"
  - "public/**/*"
  - "package.json"
  - "next.config.js"
  - "node_modules/**/*"
  - "!node_modules/.cache"
  - "!**/*.ts"
  - "!**/*.map"
  - "!.git"
  - "!src/**"
  - "!tests/**"
  - "!scripts/**"
  - "!build/**"

# Extra resources bundled alongside the app (accessible via process.resourcesPath)
extraResources:
  - from: "electron/resources/"
    to: "."
    filter:
      - "**/*"

mac:
  target:
    - target: dmg
      arch: [x64, arm64]
    - target: zip
      arch: [x64, arm64]
  category: public.app-category.games
  icon: build/icon.icns
  darkModeSupport: true
  hardenedRuntime: true
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist

dmg:
  artifactName: "${productName}-${version}-mac-${arch}.${ext}"
  contents:
    - x: 130
      y: 220
    - x: 410
      y: 220
      type: link
      path: /Applications

win:
  target:
    - target: nsis
      arch: [x64]
    - target: portable
      arch: [x64]
    - target: zip
      arch: [x64]
  icon: build/icon.ico
  artifactName: "${productName}-${version}-win-${arch}.${ext}"

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  installerIcon: build/icon.ico
  uninstallerIcon: build/icon.ico
  installerHeaderIcon: build/icon.ico
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: MTG Deck Builder
  license: LICENSE

portable:
  artifactName: "${productName}-${version}-portable.${ext}"

linux:
  target:
    - target: AppImage
      arch: [x64]
    - target: deb
      arch: [x64]
    - target: tar.gz
      arch: [x64]
  category: Game
  icon: build/icons
  artifactName: "${productName}-${version}-linux-${arch}.${ext}"

appImage:
  license: LICENSE
